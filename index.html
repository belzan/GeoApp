<!DOCTYPE html>
<html>
  <head>
    <title>Device Properties Example</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 

    <script type="text/javascript" src="phonegap.js"></script>

    <script type="text/javascript">        
    



    var Count = 0;
    var blaat = setInterval("TelDieShit()",1000);
    var watchID = null;
    var Fire = 0;
	var Calibreer = 0;
    var Nick = "";

    function onBodyLoad() { 
        document.addEventListener("deviceready", onDeviceReady, false);
      }

    function onDeviceReady() { 
        $("#submit").on("click",function(){
            Nick = $("#naam").val();
           $(".wrappert").hide(100);
            watchId = navigator.geolocation.watchPosition(onSuccess, onError,{ timeout: 5000,  enableHighAccuracy: true, maximumAge: 3000 }); 
        })				      
    }

    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitude: '           + position.coords.latitude + '<br />' +
                            'Longitude: '          + position.coords.longitude + '<br />' +
                            'Altitude: '           + position.coords.altitude   + '<br />' +
                            'Accuracy: '           + position.coords.accuracy   + '<br />' +
                            'Altitude Accuracy: '  + position.coords.altitudeAccuracy+ '<br />' +
                            'Heading: '            + position.coords.heading + '<br />' +
                            'Speed: '              + position.coords.speed  + '<br />' +
                            'Timestamp: '          + position.timestamp  + '<br />';
       Count = 0;      
      $("#myiframe").attr("src","http://www.duwel.net/location.php?lat="+position.coords.latitude+"&lon="+position.coords.longitude+"&nick="+Nick+"&fire="+Fire+"&cal="+Calibreer);
       Fire = 0;
    }

    function onError(error) {
        alert('code: '    + error.code    + '\n' + 'message: ' + error.message + '\n');        
    }

    function TelDieShit(){
        Count++;
        var element2 = document.getElementById('Teller');
        element2.innerHTML = Count;       
    }

	$(document).ready(function () {
			$("#Vuur").on("click", function(){	
			Fire = 1;                
		})  
	})
	
	$(document).ready(function () {
			$("#Calibreer").on("click", function(){	
			if (Calibreer == 1) {
				Calibreer = 0;
			} else {
				Calibreer = 1;                
			}
		})  
	})

    </script>

  </head>
  <body onload="onBodyLoad()">
    <p id="geolocation">Finding geolocation...</p>
    <p id="Teller">0</p>
    <div class="wrappert">
    Naam: <input id="naam" placeholder="Naam" type="text"></input><input id="submit" type="submit" value="Gaan!"></input>
    </div>

    <br>
    <br>
	<input id="Calibreer" type="submit" value="Calibreer"></input> 
    <input id="Vuur" type="submit" value="VUUR!"></input> 
    <br>
    <br>
    <iframe id="myiframe" width="280" height="100" src="http://www.duwel.net/location.php" ></iframe>

   

  </body>
</html>

